{"version":3,"sources":["fetchPixabayserver.js","index.js"],"names":["fetchPixabay","name","page","response","fetch","ok","picture","json","Error","status","form","document","querySelector","btnLoadMore","gallery","onSearch","e","preventDefault","innerHTML","elements","currentTarget","searchQuery","value","total","totalHits","hits","renderPosts","console","log","onLoadMore","pictureMore","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","addEventListener"],"mappings":";;;AAQC,aARc,eAAeA,EAAaC,EAAMC,GACzCC,MAAAA,QAAiBC,2EAA2EH,sDAAyDC,KACvJ,GAACC,EAASE,GAEP,CAEEC,aADeH,EAASI,OAFzB,MAAA,IAAIC,MAAML,EAASM,QAK5B,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;AC6DA,aArED,QAAA,oBACA,IAAA,EAAA,EAAA,QAAA,yBAoEC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAlED,MAAMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAcF,SAASC,cAAc,cACrCE,EAAUH,SAASC,cAAc,YAGvC,IAAIX,EAAO,GACPC,EAAO,EAKX,eAAea,EAASC,GACtBA,EAAEC,iBACFf,EAAO,EACPY,EAAQI,UAAY,GAEd,MAAA,SAAEC,GAAaH,EAAEI,eACjB,YAAEC,GAAgBF,EACxBlB,EAAOoB,EAAYC,MAEf,IACIhB,MAAAA,QAAgB,EAAaL,EAAAA,SAAAA,EAAMC,IACnC,MAAEqB,EAAF,UAASC,EAAT,KAAoBC,GAASnB,EACnCoB,EAAYD,GACZ,MACAE,QAAQC,IAAI,UAGdP,EAAYC,MAAQ,GAMtB,eAAeO,IACb3B,GAAQ,EACF4B,MAAAA,QAAoB,EAAa7B,EAAAA,SAAAA,EAAMC,IACvC,MAAEqB,EAAF,UAASC,EAAT,KAAoBC,GAASK,EACnCJ,EAAYD,GAId,SAASC,EAAYD,GACbM,MAAAA,EAASN,EAAKO,IAAI,EAAGC,aAAAA,EAAcC,cAAAA,EAAeC,KAAAA,EAAMC,MAAAA,EAAOC,MAAAA,EAAOC,SAAAA,EAAUC,UAAAA,4DAGpEN,WAAsBE,+GAGfC,gFAGAC,mFAGGC,oFAGCC,yDAK1BC,KAAK,IAER1B,EAAQ2B,mBAAmB,YAAaV,GAxD1CrB,EAAKgC,iBAAiB,SAAU3B,GAuBhCF,EAAY6B,iBAAiB,QAASb","file":"src.ee31cd71.js","sourceRoot":"../src","sourcesContent":["export default async function fetchPixabay(name, page) {\n  const response = await fetch(`https://pixabay.com/api/?key=25718667-d0b548046b545cf0dd46ad07c&q=${name}&image_type=photo&safesearch=true&per_page=5&page=${page}`);\n  if (!response.ok) {\n    throw new Error(response.status);\n  } else {\n    const picture = await response.json();\n    return picture;\n  }\n};\n","import './css/styles.css';\nimport fetchPixabay from './fetchPixabayserver';\n\nconst form = document.querySelector(\"#search-form\");\nconst btnLoadMore = document.querySelector(\".load-more\");\nconst gallery = document.querySelector(\".gallery\");\n\n\nlet name = '';\nlet page = 1;\n\n\nform.addEventListener(\"submit\", onSearch);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  page = 1;\n  gallery.innerHTML = '';\n\n  const { elements } = e.currentTarget;\n  const { searchQuery } = elements;\n  name = searchQuery.value;\n\n  try {\n    const picture = await fetchPixabay(name, page);\n    const { total, totalHits, hits } = picture;\n    renderPosts(hits);\n  } catch {\n    console.log(\"ошибка\");\n  };\n\n  searchQuery.value = '';\n};\n\n\nbtnLoadMore.addEventListener('click', onLoadMore);\n\nasync function onLoadMore() {\n  page += 1;\n  const pictureMore = await fetchPixabay(name, page);\n  const { total, totalHits, hits } = pictureMore;\n  renderPosts(hits)\n};\n\n\nfunction renderPosts(hits) {\n  const markup = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n      <div class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b> ${likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b> ${views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b> ${comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b> ${downloads}\n          </p>\n        </div>\n      </div>\n    `;\n  }).join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n};"]}